<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ê²Œì„ ë§ˆì¼“ - ë³´ìœ ëª©ë¡</title>
  <style>
    body { font-family: Arial, sans-serif; background-color: #f4f6f9; display:flex; justify-content:center; margin:0; padding:0 }
    .container { width:90%; max-width:1000px; background:#fff; margin-top:50px; padding:40px; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.1) }
    h1 { text-align:center; color:#333; margin-bottom:30px }
    table { width:100%; border-collapse:collapse }
    th, td { text-align:center; padding:12px; border-bottom:1px solid #ddd; font-size:15px }
    th { background:#f8f9fa; color:#333 }
    img { width:120px; border-radius:6px }
    .btn-review { background:#007BFF; color:#fff; border:none; padding:8px 12px; border-radius:6px; cursor:pointer }
    .btn-review:hover { background:#0056b3 }
    .back-btn { display:block; text-align:center; margin-top:25px }
    .back-btn a { text-decoration:none; color:#007BFF; font-weight:bold }
    .back-btn a:hover { text-decoration:underline }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ® ë³´ìœ ëª©ë¡</h1>

    <% function fmtPrice(p) { if (p === 0) return 'ë¬´ë£Œ'; if (p == null) return '-'; const n = Number(p); if (Number.isNaN(n)) return '-'; return n.toLocaleString('ko-KR') + 'ì›'; } %>

    <table>
      <thead>
        <tr>
          <th>ì´ë¯¸ì§€</th>
          <th>ê²Œì„ ì´ë¦„</th>
          <th>ì¥ë¥´</th>
          <th>êµ¬ë§¤ì¼</th>
          <th>ê°€ê²©</th>
          <th>ê´€ë¦¬</th>
        </tr>
      </thead>
      <tbody>
        <% const list = Array.isArray(items) ? items : [];
           if (list.length === 0) { %>
          <tr><td colspan="6" style="padding:30px; color:#666">êµ¬ë§¤í•œ ê²Œì„ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>
        <% } else { list.forEach(p => { %>
          <tr>
            <td><img src="<%= p.game_image %>"></td>
            <td><%= p.game_title %></td>
            <td><%= p.genre || 'ì•Œ ìˆ˜ ì—†ìŒ' %></td>
            <td><%= p.purchased_at ? new Date(p.purchased_at).toISOString().slice(0,10) : '-' %></td>
            <td><%= fmtPrice(p.price) %></td>
            <td>
              <a class="btn-review" href="/reviews/new?game_id=<%= p.game_id %>">ë¦¬ë·°ì‘ì„±</a>
            </td>
          </tr>
        <% }) } %>
      </tbody>
    </table>

    <div class="back-btn">
      <a href="/users/my_page">â† ë§ˆì´í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°</a>
    </div>
  </div>
</body>
</html>